<div class="row">
  <div class="col-md-12">
    <div class="box">
      <div class="box-body pad table-responsive"> 
        <div class="box-body">
           <!--Mensajes-->
          <div id="mensajeOK"><php:texto id="mensajeOK" /></div>
          <div id="mensajeError"><php:texto id="mensajeError" /></div>      
		  <div id="mensajeAd"><php:texto id="mensajeAd" /></div> 		  												   
       
        <form name="formulario2" id="formulario" action="Documentos_Aprobar.php" method="POST" autocomplete="off">
          <table id="example2" class="table table-bordered table-hover">
	          <div class="col-md-2 xs-12">
		          <button class="btn btn-md btn-default btn-block ocultar" type="button" style="margin-top: 10px" data-toggle="collapse" href="#collapseExample" role="button" data-parent="#accordion"><a id="a">Ocultar Filtro</a></button>
	          </div>
          </table>
      		<div ><!--class="collapse in" id="collapseExample">
      		<!--<div class="row">-->
      			<div class="col-md-12">
      				<div class="box">
      					<div class="box-body pad table-responsive">
      					  <div class="box-header">
      						  <div class="form-group">
							 <php:repeticion id="formulario">
   
        						   <div class="row">
        						      <div class="col-md-4 xs-12">
        							    <label for="idDocumento">Nro Documento</label>
        							    <input type="text" class="form-control" id="idDocumento" name="idDocumento" maxlength="10" value="<php:item id="idDocumento" />" placeholder="Nro Documento" />
        							  </div>
        						
	    							  <div class="col-md-4 xs-12">
	    							    <label for="NombreTipoDoc">Tipo Documento</label>
										<select class= "form-control" name="idTipoDoc" id="idTipoDoc" >
											<option value="0">(Seleccione)</option>
											<php:repeticion id="tiposdocumentos">						
												<option value="<php:item id="idTipoDoc" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoDoc" /><php:argumento idvalor="idTipoDoc" /></php:funcion>><php:item id="NombreTipoDoc" /></option>
											</php:repeticion>
										</select>	
									   </div>									  
										  
	    							 	<!--Proceso-->									
										<div class="col-md-4 xs-12">
											<label for="Nombre">Proceso</label>	
											<select class="form-control" name="idProceso" id="idProceso" >
												<option value="0">(Seleccione)</option>
												<php:repeticion id="Procesos">						
													<option value="<php:item id="idProceso" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idProceso" /><php:argumento idvalor="idProceso" /></php:funcion>><php:item id="Descripcion" /></option>
												</php:repeticion>
											</select>	
										</div>
									</div>
									
									<!--Tipo de firma del Documento-->
									<div class="row">
										<div class="col-md-4 xs-12">
											<label for="Nombre">Tipo de Firma</label>	
											<select class="form-control" name="idTipoFirma" id="idTipoFirma" >
												<option value="0">(Seleccione)</option>
												<php:repeticion id="TipoFirmas">						
													<option value="<php:item id="idTipoFirma" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoFirma" /><php:argumento idvalor="idTipoFirma" /></php:funcion>><php:item id="Descripcion" /></option>
												</php:repeticion>
											</select>	
										</div>
								
        								<!--Empleado-->
										<div class="col-md-4 xs-12">
									 		<label for="Rut Empleado">Rut Empleado</label>
									  		<input type="text" class="form-control" id="RutEmpleado" name="RutEmpleado" maxlength="50" value="<php:item id="RutEmpleado" />" placeholder="Rut del Empleado" />
										</div>
								
										<!--Nombre empleado-->
										<div class="col-md-4 xs-12">
									 		<label for="Nombre Empleado">Nombre Empleado</label>
									  		<input type="text" class="form-control" id="NombreEmpleado" name="NombreEmpleado" maxlength="50" value="<php:item id="NombreEmpleado" />" placeholder="Nombre del Empleado" />
										</div>
									</div>

				      		        <div class="row  d-flex justify-content-end">
				            			<div class="col-md-2 xs-12 pull-right d-flex justify-content-end"  style="margin-top: 30px;">
				            				<input type="hidden" name="accion" value="BUSCAR" />
				            				<button class="btn btn-md btn-primary btn-block d-flex justify-content-end"  name="accion2" type="submit" value="BUSCAR" onclick="MostrarCargando();">Buscar</button>
				            			</div>
				                  	</div>
                    </div> <!-- <div class="form-group">-->
                  </div> <!--<div class="box-header">-->
                </div> <!-- <div class="box-body pad table-responsive">-->
              </div> <!-- <div class="box">-->
            </div> <!-- <div class="col-md-12">-->
          <!--</div> <!--<div class="row"> -->
      	</div> <!-- <div class="collapse" id="collapseExample"> -->
        <input type="hidden" name="_csrf_token" id="_csrf_token"  value="<php:texto id='antiCSRF_token'/>">
                    </form>
       
    <!--Tabla-->
    <form id="formulario3" name="formulario3" method="POST" action="Documentos_Aprobar.php">
		<div id="divtabla" class="tabla-responsiva" >
		  <div class="col-md-12">
			<table id="example" class="table table-bordered table-hover " name="tbltabla">
				  <thead>
					<tr>
						<th style="text-align: center; vertical-align: middle;"><input type="checkbox" id="Seleccion"/></th>
						<th style="text-align: center;" data-campo="Nro Documento">Nro Documento</th>
						<!--<th style="text-align: center;" data-campo="CodigoFicha">C&oacute;digo de Ficha</th>-->
						<th style="text-align: center;" data-campo="Tipo Documento">Tipo Documento </th>
						<th style="text-align: center;" bdata-campo="Proceso">Proceso </th>
						<th style="text-align: center;" data-campo="Estado">Estado</th>
						<th style="text-align: center;" data-campo="TipoFirma">Tipo de Firma</th>
						<th style="text-align: center;" data-campo="Fecha Creacion">Fecha de creaci&oacute;n</th>		
						<th style="text-align: center;" data-campo="Rut Empresa">Rut Empresa</th>	
						<th style="text-align: center;" data-campo="Razon Social">Razon Social</th>	
						<th style="text-align: center;" data-campo="Rut Empleado">Rut Empleado</th>	
						<th style="text-align: center;" data-campo="Empleado">Empleado</th>	
						<th style="text-align: center;" data-campo="Plazo Firmante">Plazo Firmante</th>
						<th style="text-align: center;" data-campo="Plazo Flujo">Plazo Flujo</th>
						<th style="text-align: center;" data-campo="Detalle">Opciones</th>
					</tr>
				  </thead>
				<tbody>
					  <!--Contenido de Tabla-->
				<php:repeticion id="listado">
				  <tr>
				  	<td style="text-align: center; vertical-align: middle;">
				  	 	<input type="checkbox" aria-label="Checkbox for following text input" name="Documentos[]"  value='<php:item id="idDocumento"/>' class="checkbox" />
				  	</td>
					<td style="text-align: center;" data-campo="Nro Documento"><div id="<php:item id='idDocumento'/>"><php:item id="idDocumento" /></div></td>
					<!--<td style="text-align: center;" data-campo="fichaid"><php:item id="fichaid" /></td>-->
					<td style="text-align: center;" data-campo="Tipo Documento"><div id="td_<php:item id='idDocumento'/>"><php:item id="NombreTipoDoc" /></div></td>
					<td style="text-align: center;" data-campo="Proceso"><php:item id="Proceso" /></td>
					<td style="text-align: center;" data-campo="Estado"><div id="es_<php:item id='idDocumento'/>"><php:item id="Estado" /><div></td>
					<td style="text-align: center;" data-campo="TipoFirma"><php:item id="Firma" /></td>
					<td style="text-align: center;" data-campo="FechaCreacion"><php:item id="FechaCreacion" /></td>
					<td style="text-align: center;" data-campo="RutEmpresa"><php:item id="RutEmpresa" /></td>
					<td style="text-align: center;" data-campo="RazonSocial"><php:item id="RazonSocial" /></td>
					<td style="text-align: center;" data-campo="Rut"><php:item id="Rut" /></td>
					<td style="text-align: center;" data-campo="Empleado"><php:item id="nombre" /> <php:item id="appaterno" /> <php:item id="apmaterno" /></td>
					<td style="text-align: center;" data-campo="Estado Plazo Firmante"><php:item id="semaforodetalle" /></td>
					<td style="text-align: center;" data-campo="Estado Plazo Flujo"><php:item id="semaforototal" /></td>
					
					  <input type="hidden" name="_csrf_token" id="_csrf_token"  value="<php:texto id='antiCSRF_token'/>">
                    </form>
					<td data-campo="Detalle">
					  <form name="formulario" id="formulario_tipo_<php:filamenos />" action="Documentos_Aprobar.php" method="POST">
						   <input type="hidden" name="idDocumento" id="idDocumento_<php:filamenos />" value="<php:item id="idDocumento" />">
						   <input type="hidden" name="ruta" id="ruta_<php:filamenos />" value="<php:item id="ruta" />">
						   <input type="hidden" name="pagina" value="<php:texto id="pagina" />">
						   <input type="hidden" name="nombrex" value="<php:texto id="nombrex" />">
						   <!--<button class="btn btn-primary btn-sm" name="accion" value="DETALLE" type="submit" >Detalle</button>-->
							<button class="btn btn-info btn-sm vista" name="accion" id="vista_<php:filamenos />" value="VISTA" type="button" onclick="buscarDoc(<php:filamenos />)" data-toggle="modal" data-target="#modal_vp" >Ver Documento</button>  
				   			<button class="btn btn-default btn-sm firmantes" name="accion"  id="firmantes_<php:filamenos />" value="FIRMANTES" type="button"  data-toggle="modal" data-target="#modal_firm">Ver Firmantes</button>
					    <input type="hidden" name="_csrf_token" id="_csrf_token"  value="<php:texto id='antiCSRF_token'/>">
                    </form>
					</td>
				  </tr>
				</php:repeticion>
				</tbody>
	
				<th colspan=16 class="tabla_abajo">
					<div class="col-md-12" style="font-weight: normal;">
	                 	<php:item id="pagina_actual" /> de <php:item id='pagina_ultimo' /> - Total <php:item id="total_registros" /> Registros
	              	</div>
				  <div class="col-xs-offset-5"> 
					<nav aria-label="nav1">
					  <ul class="pagination justify-content-center" style="margin-top: 0px; margin-bottom: 0px;">
						<li class="page-item ">
						  <a id="pagina_primera" class="page-link" href="#" tabindex="-1" onclick="javascript:proc_paginado(<php:item id='pagina_primera' />);" ><span><i class="fa fa-angle-double-left"></i></span></a>
						</li>
						<li class="page-item ">
						  <a id="pagina_anterior" class="page-link" href="#" tabindex="-1" onclick="javascript:proc_paginado(<php:item id='pagina_anterior' />);" ><span ><i class="fa fa-angle-left"></i></span></a>
						</li>                  
						<li class="page-item active"><a class="page-link" href="#"><php:item id="pagina_actual" /></a></li>                              
						<li class="page-item">
						  <a id="pagina_siguente" class="page-link" href="#" onclick="javascript:proc_paginado(<php:item id='pagina_siguente' />);" ><span><i class="fa fa-angle-right"></i></span></a>
						</li>
					  <li class="page-item">
						<a id="pagina_ultimo" class="page-link" href="#" onclick="javascript:proc_paginado(<php:item id='pagina_ultimo' />);" ><span><i class="fa fa-angle-double-right"></i></span></a>
					  </li>                                                     
					  </ul>
					</nav>
				  </div>
				  </th>
				<form name="paginado" id="paginado" action="Documentos_Aprobar.php" method="POST" >
					<input type="hidden" name="pagina" value="" id="pagina" >
					<input type="hidden" name="holdingid" value="<php:item id="holdingid" />" >
					<input type="hidden" name="idDocumento" value="<php:item id="idDocumento" />" >
					<input type="hidden" name="idTipoDoc" value="<php:item id="idTipoDoc" />" >
					<input type="hidden" name="idEstado" value="<php:item id="idEstado" />" >
					<input type="hidden" name="idTipoFirma" value="<php:item id="idTipoFirma" />" >
					<input type="hidden" name="idProceso" value="<php:item id="idProceso" />" >
					<input type="hidden" name="RutEmpleado" value="<php:item id="RutEmpleado" />" >
					<input type="hidden" name="NombreEmpleado" value="<php:item id="NombreEmpleado" />" >
				  	<input type="hidden" name="total_registros" id="total_registros" value="<php:item id="total_registros" />" />
				  	<input type="hidden" name="cantidad" id="cantidad" value="<php:item id='cantidad'/>"/>
				  	<!--Documentos a firmar-->
				  	<input type="hidden" name="docs" id="docs" value="<php:item id='docs' />"/>
				  	<input type="hidden" name="pag" id="pag"  value="<php:item id='pag' />"/>
				  <input type="hidden" name="_csrf_token" id="_csrf_token"  value="<php:texto id='antiCSRF_token'/>">
                    </form>
	
			</table>
				<input type="hidden" name="select" id="select"/>
			    <div class="row">
	    			<div class="col-md-2 xs-12 pull-right">
	    				<input type="hidden" name="docs" id="docs_form" />
	    				<input type="hidden" name="accion" value="BUSCAR"/>
	    				<input type="hidden" name="usuarioid" id="usuarioid" value="<php:item id='usuarioid' />"/>
	    				<input type="hidden" name="ptipousuarioid" id="ptipousuarioid" value="<php:item id='ptipousuarioid' />"/>

	    				<php:repeticion id="modifica">
    						<button class="btn btn-md btn-success btn-block"  name="accion" id="SELECCION_MULTIPLE" type="button" data-toggle="modal" data-target="#modal_pendientes" >Aprobar</button>
    					</php:repeticion>

	    			</div>
	          	</div>

	          	<div class="row">
	          		<div class="col-md-2 xs-12 pull-left">
	          			<php:repeticion id="modifica">
	          			 	<button class="btn btn-md btn-primary btn-block pull-left"  name="accion" id="SELECCION_MULTIPLE_R" type="button" data-toggle="modal" data-target="#modal_pendientes_r" >Rechazar</button>
	          			 </php:repeticion>
	          		</div>
	          	</div>
		   </div>
		  <input type="hidden" name="_csrf_token" id="_csrf_token"  value="<php:texto id='antiCSRF_token'/>">
                    </form>
       </php:repeticion>

      

       <!-- Modal para Vista previa-->
		<div class="modal fade bd-example-modal-lg" id="modal_vp" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Vista Previa de Documento <h3 id="num"></h3></h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true" class="cerrar_modal">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="mensajeError_modal"></div>
		         	<div style="clear:both">
			           <iframe id="viewer" width="100%" height="600px"></iframe>
			        </div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
				<input type="hidden" name="idDocumento" value='<php:item id="idDocumento"/>' >
		        <button type="button" class="btn btn-secondary btn-md cerrar_modal" id="cerrar" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div>
		  </div>
		</div>

		<!-- Modal para Firmantes-->
		<div class="modal fade" id="modal_firm" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Firmantes <h3 id="num_f"></h3></h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true" class="cerrar_modal">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="divtabla" class="tabla-responsiva" >
					<table id="tabla_firm" class="table table-bordered table-hover " >
						  <thead>
							<tr>
								<th style="text-align: center;" data-campo="Rut">Rut</th>
								<th style="text-align: center;" data-campo="Nombre">Nombre</th>
								<th style="text-align: center;" data-campo="Fecha Firma">Fecha Firma</th>
							</tr>
						  </thead>
						<tbody>
						<!--Contenido de Tabla-->
						</tbody>
					</table>
				</div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
			      	<input type="hidden" name="idDocumento" value='<php:item id="idDocumento"/>' >
		        	<button type="button" class="btn btn-secondary btn-md cerrar_modal" id="cerrar" data-dismiss="modal">Cerrar</button>
		       </div>
		    </div>
		  </div>
		</div>

		<!-- Modal de seleccion-->
		<div class="modal fade" id="modal_pendientes" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-pendiente" >
		    <div class="modal-content ">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Documentos Pendientes para Aprobar</h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true" class="cerrar_modal">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body " style=" max-height:400px; overflow-y: auto;">
		      	<div id="divtabla" class="tabla-responsiva" >
					<table id="tabla_pendientes" class="table table-bordered table-hover " >
						  <thead>
							<tr>
								<th style="text-align: center;" data-campo="idDocumento">id Documento</th>
								<th style="text-align: center;" data-campo="Tipo de documento">Tipo de Documento</th>
								<th style="text-align: center;" data-campo="Opciones">Estado</th>
							</tr>
						  </thead>
						<tbody>
						<!--Contenido de Tabla-->
						</tbody>
					</table>
				</div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
			      <button type="button" class="btn btn-success btn-md aprobar_aprobar_" id="aprobar" data-dismiss="modal">Aprobar</button>
				  <button type="button" class="btn btn-default btn-md" id="cerrar_aprobar">Cerrar</button>
			     
		       </div>
		    </div>
		  </div>
		</div>

       <!-- Modal de seleccion-->
		<div class="modal fade" id="modal_pendientes_r" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-pendiente" >
		    <div class="modal-content ">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Documentos Pendientes por Rechazar</h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true" class="cerrar_modal">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body " style=" max-height:400px; overflow-y: auto;">
		      	<div id="divtabla" class="tabla-responsiva" >
					<table id="tabla_pendientes_r" class="table table-bordered table-hover " >
						  <thead>
							<tr>
								<th style="text-align: center;" data-campo="idDocumento">id Documento</th>
								<th style="text-align: center;" data-campo="Tipo de documento">Tipo de Documento</th>
								<th style="text-align: center;" data-campo="Opciones">Estado</th>
							</tr>
						  </thead>
						<tbody>
						<!--Contenido de Tabla-->
						</tbody>
					</table>
				</div>

				<div class="row">
					<div class="col-md-12">
						<label for="">Observacion </label>
						<input type="text" class="form-control" name="observacion" id="observacion" placeholder="" />
					</div>
				</div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
			      <button type="button" class="btn btn-primary btn-md pull-left rechazar_" id="rechazar" data-dismiss="modal">Rechazar</button>
				  <button type="button" class="btn btn-default btn-md" id="cerrar_rechazar">Cerrar</button>
			     
		       </div>
		    </div>
		  </div>
		</div>
	
      </div>
    </div>
  </div>
</div> 
</section>



