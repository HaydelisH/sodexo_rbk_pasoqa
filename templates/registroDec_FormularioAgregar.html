<div class="row">
  <div class="col-md-12">
    <div class="box ">
      <div class="box-body pad table-responsive">
      <!--Botones de cabecera-->
       <!-- <div class="box-header">
			<form action="Supervisores.php" method="POST">
		  		<button class="btn btn-default" name="accion" value="Volver"><a><i class="fa fa-arrow-left" aria-hidden="true"></i>Volver</a></button>
		  	</form>
        </div>
      <!-- /.box-header -->
      <div class="box-body">
         <!--Mensajes-->
		<div id="mensajeError"><php:texto id="mensajeError" /></div>
		<div id="mensajeOK"><php:texto id="mensajeOK" /></div>	
		
		<form role="form" name="formulario" id="formulario" action="RegistroDec.php" method="POST" autocomplete=off>
            <php:repeticion id="listado">		
			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Rut</label>
					<input type="contenedor" class="form-control" id="RutUsuario"  name="user_rut" placeholder="Rut de Usuario" maxlength="10" value='<php:item id="personaid"/>'>
				  </div>
			</div>
		
			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Serial de Documento</label>
					<input type="contenedor" class="form-control" id="serial"  name="serial_number" placeholder="Serial de Documento" maxlength="10"  autofocus >
				  </div>
			</div>

			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Nombre</label>
					<input type="contenedor" class="form-control" id="nombre" name="user_name" placeholder="Nombre Completo" maxlength="50" value='<php:item id="nombre"/>'>
				</div>
			</div>
							
			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Apellido Paterno</label>
					<input type="contenedor" class="form-control" id="appaterno" name="appaterno" placeholder="Apellido Paterno" maxlength="50" value='<php:item id="appaterno"/>'>
				</div>
			</div>

			<div class="form-row">
				<div class=col-md-6 xs-12">
					<label>Apellido Materno</label>
					<input type="contenedor" class="form-control" id="apmaterno" name="apmaterno" placeholder="Apellido Materno" maxlength="50" value='<php:item id="apmaterno"/>'>
			  </div>
			</div>

			<div class="form-row">
				<div class="col-md-6 xs-12">
	              <label for="">Fecha de Nacimiento</label>
	              <div class="form-group">
	                <div class="input-group date">
	                  <div class="input-group-addon">
	                    <i class="fa fa-calendar"></i>
	                  </div>
	                  <input type="text" class="form-control pull-right" id="fechaNac" name="user_birthday"  readonly placeholder="Fecha de nacimiento" style="background-color: white;" value='<php:item id="user_birthday"/>' >
	                </div>
	              </div>
	            </div>
			</div>

			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Correo Electr&oacute;nico</label>
					<input type="email" class="form-control" id="correo1" placeholder="Correo electr&oacute;nico" maxlength="50" value='<php:item id="correo"/>'>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Confirmar Correo Electr&oacute;nico</label>
					<input type="email" class="form-control" id="correo2" placeholder="Correo electr&oacute;nico" maxlength="50" onpaste="return false" value='<php:item id="correo2"/>'>
				</div>
			</div>
			<!--Correo valido-->
			<input type="hidden" id="correo" name="user_email" >

			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label >Genero</label>
					<select name="user_gender" id="genero" class="form-control">
						<option value="">(Seleccione)</option>
						<option value="F"> Femenino </option>
						<option value="M"> Masculino </option>
					</select>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label >Fono (ejemplo +56991234567)</label>
					<input type="contenedor" class="form-control" id="fono" name="user_phone" placeholder="Fono" maxlength="12" value='<php:item id="fono"/>'>
				</div>
			</div>

		
			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Pin</label>
					<input type="password" class="form-control" id="pin"  name="pin" placeholder="Pin" maxlength="10"  >
				  </div>
			</div>
			
			<div class="form-row">
				<div class="col-md-6 xs-12">
					<label>Confirmaci&oacute;n Pin</label>
					<input type="password" class="form-control" id="confipin"  name="confipin" placeholder="Pin" maxlength="10"  >
				  </div>
			</div>
			
			<div class="form-row">  
				<div class="col-md-2 xs-12 pull-right">            
				   <button class="btn btn-md btn-primary btn-block" type="submit" style="margin-top: 20px" name="accion2" value="AGREGAR" id="AGREGAR" onclick="javascript:return validarFormulario(this),new Array(),new Array('apmaterno') && validaRut2(document.formulario.RutUsuario) ;"/>Guardar</button>
				</div>
			</div>   
	
         </php:repeticion>
		</form>
	   </div>
      </div>
    <!-- /.box -->
    </div>
  </div>
  <!-- /.col -->
 </div>

<!--Calendarios-->
<script>
  $('#fechaNac').datepicker({
    language: "es",
    orientation: "bottom",
    autoclose: true,
    todayHighlight: true
  });
</script>

<script>
  //Validar los tipo Number 
  $("#AGREGAR").click(function(){
  	//Campos vacios
    if($("#serial").val().length == 0){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca serial del documento");
        $('#serial').focus();
        return false;
    }
    if($("#nombre").val().length == 0){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca nombre completo");
        $('#nombre').focus();
        return false;
    }
    if($("#appaterno").val().length == 0){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca apellido paterno");
        $('#appaterno').focus();
        return false;
    }
    if ($("#fechaNac").val().length == 0 ){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca fecha de nacimiento");
        $('#fechaNac').focus();
        return false;
    }
    if ($("#correo1").val().length == 0 ){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca un correo de electr&oacute;nico v&aacute;lido");
        $('#correo1').focus();
        return false;
    }
    if ($("#correo2").val().length == 0 ){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Confirme el correo de electr&oacute;nico introducido");
        $('#correo2').focus();
        return false;
    }
    //Si la confirmacion de correo es valida
    if( $("#correo1").val() === $("#correo2").val() ){
    	$("#correo").val($("#correo1").val());
    }
    else{
    	$("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Verifique correo electr&oacute;nico introducido");
        $('#correo2').focus();
        return false;
    }
     if ($("#genero").val() == 0 ){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Seleccione genero");
        $('#genero').focus();
        return false;
    }
    if ($("#fono").val() == 0 ){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Introduzca fono con el formato sugerido");
        $('#fono').focus();
        return false;
    }
    //Si tiene menos numeros de lo que debe 
	if (($("#fono").val().length > 1 ) && ($("#fono").val().length < 12)){
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Debe introducir el fono completo con codigo de area iniciando con + . Ejemplo: +569 ");
        $('#fono').focus();
        return false;
    }
    //Si no tiene el +
    if ($("#fono").val().charAt(0) != '+'){
    	$("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("Debe introducir el fono con codigo de area iniciando con + . Ejemplo: +569 ");
        $('#fono').focus();
        return false;
    }
    
	
	//valida pin
	if ($("#pin").val() != $("#confipin").val() )
	{
        $("#mensajeError").addClass("callout callout-warning");
        $("#mensajeError").html("El Pin ingresado es distinto a la confirmaci&oacute;n del Pin");
		document.getElementById("pin").value = "";
		document.getElementById("confipin").value = "";		
        $('#pin').focus();
        return false;
    }

	var clavepin = document.getElementById("pin").value;
	var largopin = clavepin.length;
	if (largopin < 6 || largopin > 12)
	{
		$("#mensajeError").addClass("callout callout-warning");
		$("#mensajeError").html("La clave para firmar sus documentos debe ser  de un m&iacute;nimo de 6 caracteres y m&aacute;ximo de 12 caracteres");
		document.getElementById("pin").value = "";
		document.getElementById("confipin").value = "";		
        $('#pin').focus();
        return false;
	}
	
	MostrarCargando();
});
</script>