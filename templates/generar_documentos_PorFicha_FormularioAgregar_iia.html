<div class="row">
  <div class="col-md-12">
    <div class="box ">
      <div class="box-body pad table-responsive">
      <!--Botones de cabecera-->
        <div class="box-header">
		  <a class="btn btn-default btn_letra_azul" href="Generar_Documento_PorFicha.php"><i class="fa fa-arrow-left" aria-hidden="true"></i>Volver</a>
		  
        </div>
      <!-- /.box-header -->
      <div class="box-body">
         <!--Mensajes-->
		<div id="mensajeError"><php:texto id="mensajeError" /></div>
		<div id="mensajeOK"><php:texto id="mensajeOK" /></div>	
		
				<form name="formulario" class="formulario" id="formulario"  class="form-horizontal" action="Generar_Documento_PorFicha.php" method="POST" autocomplete=off>
				<php:repeticion id="formulario">
				
				 <div class="nav-tabs-custom">
		            <ul class="nav nav-tabs">
						<li class="active"><a href="#form_dp" data-toggle="tab">Datos personales</a></li>
						<li><a href="#form_dc" data-toggle="tab">Datos del Documento</a></li>
						<li><a href="#tab_4" data-toggle="tab">Generaci&oacute;n</a></li>
		             <!-- <li><a href="#tab_3" data-toggle="tab">Otros Datos</a></li>-->
		              
		            </ul>

		            <div class="tab-content">
		              <div class="tab-pane active" id="form_dp">
						<div class="box-body">
						
							<div class="form-row">
				              <div class="col-md-12">
								<label style="float:right;"> (*) Campos obligatorios </label>
							  </div>
							</div>
							
		                	<div class="form-row">
								<div class="col-md-6">
									<label for="tipousuarioid">Rut (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="newusuarioid"  name="newusuarioid" placeholder="Rut v&aacute;lido" maxlength="10" value="<php:item id="newusuarioid" />" autofocus >
									</div>
								  </div>
								<div class="col-md-6">
									<label for="contenedorid" >Nombre Completo (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre completo" maxlength="110" value="<php:item id="nombre" />" >
									</div>
								</div>
							</div>

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Nacionalidad (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="nacionalidad" name="nacionalidad" placeholder="Nacionalidad" maxlength="50" value="<php:item id="nacionalidad" />">
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Fecha de nacimiento (*)</label>
									<div class="form-group">
										<div class="input-group date">
											<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
											<input type="text" class="form-control" id="fechanacimiento" name="fechanacimiento" placeholder="Fecha de nacimiento"  />
										</div>
									</div>
								</div>
							</div>			

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Estado civil (*)</label>
									<select class= "form-control" name="idEstadoCivil" id="idEstadoCivil">
										<option value="0">(Seleccione)</option>
										<php:repeticion id="EstadoCivil">
										<option value="<php:item id="idEstadoCivil" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idEstadoCivil" /><php:argumento idvalor="idEstadoCivil" /></php:funcion>><php:item id="Descripcion" /></option>
										</php:repeticion>
									</select>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Direcci&oacute;n (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="direccion" name="direccion" placeholder="Direccion" maxlength="110" value="<php:item id="direccion" />">
									</div>
								</div>
							</div>	
								
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Comuna (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="comuna" name="comuna" placeholder="Comuna" value="<php:item id="comuna" />">
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Ciudad (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="ciudad" name="ciudad" placeholder="Ciudad" value="<php:item id="ciudad" />">
									</div>
								</div>
							</div>	

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Rol (*)</label>
									<select class= "form-control" name="rolid" id="rolid">
										<option value="0">(Seleccione)</option>
										<php:repeticion id="Roles">
											<option value="<php:item id="rolid" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="rolid" /><php:argumento idvalor="rolid" /></php:funcion>><php:item id="Descripcion" /></option>
										</php:repeticion>
									</select>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Correo Electr&oacute;nico (*)</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="correo" name="correo" placeholder="Correo electr&oacute;nico" maxlength="50" value="<php:item id="correo" />">
									</div>
								</div>
							</div>	

							<!--<div class="form-row">
								<div class="form-row">
									<div class="col-md-6">
										<label for="contenedorid" >Profesi&oacute;n </label>
										<div class="input-group col-xs-12">
											<input type="text" class="form-control" id="Profesion" name="Profesion" placeholder="Profesi&oacute;n" value="<php:item id="Profesion" />">
										</div>
									</div>
								</div>	
							</div>	-->

						</div>
		              </div>
		              <!-- /.tab-pane -->
		              <div class="tab-pane" id="form_dc">
						<div class="box-body">

						
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >A&ntilde;os Servicio</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="AnosServicio" name="AnosServicio" placeholder="A&ntilde;os Servicio" value="<php:item id="AnosServicio" />">
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >AsigVehiculo</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="AsigVehiculo" name="AsigVehiculo" placeholder="AsigVehiculo" value="<php:item id="AsigVehiculo" />">
									</div>
								</div>
							</div>
				
		
		               		<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Aviso Previo</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="AvisoPrevio" name="AvisoPrevio" placeholder="Aviso Previo" >
									</div>
								</div>
								
								<div class="col-md-6">
									<label for="contenedorid" >Bono1</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Bono1" name="Bono1" placeholder="Bono1" >
									</div>
								</div>
							</div>

		
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Bono2</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Bono2" name="Bono2" placeholder="Bono2" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Cargo</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Cargo" name="Cargo" placeholder="Cargo" >
									</div>
								</div>
							</div>
							
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Carrera</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Carrera" name="Carrera" placeholder="CargoCarrera">
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Ciudad</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="CiudadDatos" name="CiudadDatos" placeholder="Ciudad" >
									</div>
								</div>
							</div>
			
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Colaci&oacute;n</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Colacion" name="Colacion" placeholder="Colaci&oacute;n" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Colaci&oacute;n2</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Colacion2" name="Colacion2" placeholder="Colaci&oacute;n2" >
									</div>
								</div>
							</div>
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Descuento AF</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="DescuentoAF" name="DescuentoAF" placeholder="Descuento AF" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Descuento Farmacia</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="DescuentoFarmacia" name="DescuentoFarmacia" placeholder="Descuento Farmacia" >
									</div>
								</div>
							</div>
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Descuento Oftalmologico</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="DescuentoOftalmologico" name="DescuentoOftalmologico" placeholder="Descuento Oftalmologico" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >D&iacute;as Trabajados</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="DiasTrabajados" name="DiasTrabajados" placeholder="D&iacute;as Trabajados" >
									</div>
								</div>
							</div>
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Direcci&oacute;n Sucursal</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="DireccionSucursal" name="DireccionSucursal" placeholder="Direcci&oacute;n Sucursal" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Fecha Ingreso</label>
									<div class="input-group date">
										<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
										<input type="text" class="form-control" id="FechaIngreso" name="FechaIngreso" placeholder="Fecha Ingreso"  />
									</div>
							  	</div>
							</div>
	
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Fecha de Inicio</label>
									<div class="input-group date">
										<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
										<input type="text" class="form-control" id="FechaInicio" name="FechaInicio" placeholder="Fecha de Inicio"  />
									</div>
							  	</div>
								<div class="col-md-6">
									<label for="contenedorid" >Fecha de T&eacute;rmino</label>
									<div class="input-group date">
										<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
										<input type="text" class="form-control" id="FechaTermino" name="FechaTermino" placeholder="Fecha de T&eacute;rmino"  />
									</div>
							  	</div>
							</div>

		
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Fondo Fijo Pendiente</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="FondoFijoPendiente" name="FondoFijoPendiente" placeholder="Fondo Fijo Pendiente" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Indem Voluntaria</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="IndemVoluntaria" name="IndemVoluntaria" placeholder="Indem Voluntaria" >
									</div>
								</div>
							</div>
	
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Jornada</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Jornada" name="Jornada" placeholder="Jornada" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Mes Aviso</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="MesAviso" name="MesAviso" placeholder="Mes Aviso" >
									</div>
								</div>
							</div>
							
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Movilizaci&oacute;n</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Movilizacion" name="Movilizacion" placeholder="Movilizaci&oacute;n" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Nro Art&iacute;culo</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="NroArticulo" name="NroArticulo" placeholder="Nro Art&iacute;culo" >
									</div>
								</div>
							</div>
									
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Num A&ntilde;os Servicio</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="NumAnosServicio" name="NumAnosServicio" placeholder="Num A&ntilde;os Servicio" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Num Cuotas</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="NumCuotas" name="NumCuotas" placeholder="Num Cuotas" >
									</div>
								</div>
							</div>

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Pr&eacute;stamo Empresa</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="PrestamoEmpresa" name="PrestamoEmpresa" placeholder="Pr&eacute;stamo Empresa" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Sueldo Base</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="SueldoBase" name="SueldoBase" placeholder="Sueldo Base" >
									</div>
								</div>
							</div>
		
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Texto1</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Texto1" name="Texto1" placeholder="Texto1" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Texto2</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="Texto2" name="Texto2" placeholder="Texto2" >
									</div>
								</div>
							</div>
	
							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Total Descuentos</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="TotalDescuentos" name="TotalDescuentos" placeholder="Total Descuentos" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Total Haberes</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="TotalHaberes" name="TotalHaberes" placeholder="Total Haberes" >
									</div>
								</div>
							</div>

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Total Pagar</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="TotalPagar" name="TotalPagar" placeholder="Total Pagar" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Vacaciones D&iacute;as Corridos</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="VacacionesDiasCorridos" name="VacacionesDiasCorridos" placeholder="Vacaciones D&iacute;as Corridos" >
									</div>
								</div>
							</div>

							<div class="form-row">
								<div class="col-md-6">
									<label for="contenedorid" >Vacaciones Proporcionales</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="VacacionesProporcionales" name="VacacionesProporcionales" placeholder="Vacaciones Proporcionales" >
									</div>
								</div>
								<div class="col-md-6">
									<label for="contenedorid" >Valor Cuota</label>
									<div class="input-group col-xs-12">
										<input type="text" class="form-control" id="ValorCuota" name="ValorCuota" placeholder="Valor Cuota" >
									</div>
								</div>
							</div>
						</div>
		              </div>
					  
					  
		              <div class="tab-pane " id="tab_4">
						<div class="box-body">
						
						<div class="form-row">
						  <div class="col-md-12">
							<label style="float:right;"> (*) Campos obligatorios </label>
						  </div>
						</div>
		                	
		                  <!--Empresas-->
			              <div class="col-md-6">
			                <label for="Empresa" >Empresa (*) </label>
			                <!--Select de Empresas disponibles-->
			                <select class= "form-control" name="RutEmpresa" id="RutEmpresa">
			                <option value="0">( Seleccione )</option>
			                  <php:repeticion id="Empresas">
			                    <option value="<php:item id="RutEmpresa" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="RutEmpresa" /><php:argumento idvalor="RutEmpresa" /></php:funcion>><php:item id="RazonSocial" /></option>
			                  </php:repeticion>
			                </select>
			              </div>
						  
						  <!--Fecha del documento-->
						  <div class="col-md-6">
							<label for="contenedorid" >Fecha del Documento(*)</label>
								<div class="form-group">
									<div class="input-group date">
										<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
										<input type="text" class="form-control" id="FechaDocumento" name="FechaDocumento" placeholder="Fecha del Documento"  />
									</div>
								</div>
							</div>
						  
						  <div class="col-md-6 xs-12">
							<label>Cliente (*) </label>
							<div class="box-body" style="padding-left: 0px;padding-top: 0px;">
								<div class="col-md-11 xs-12" style="padding-left: 0px; padding-right: 0px;">
									<input class="form-control" type="text" name="nombrelugarpago" id="nombrelugarpago" placeholder="(Seleccione)" readonly/>
									<input class="form-control" type="hidden" name="lugarpagoid" id="lugarpagoid" />
								</div>
								<div class="col-md-1 xs-12" style="padding-left: 5px; padding-right: 0px;">
									<button class="btn btn-md btn-primary btn-block lugares_pago"  type="button" id="btn_lugares_pago" data-toggle="modal" data-target="#modal_lugares_pago"><i class="fa fa-search"></i></button>
								</div>
							</div>
						</div>
					
						<div class="col-md-6 xs-12">
							<label>Unidad de negocio (*)</label>
							<div class="box-body" style="padding-left: 0px;padding-top: 0px;">
								<div class="col-md-11 xs-12" style="padding-left: 0px; padding-right: 0px;">
									<input class="form-control" type="text" name="nombrecentrocosto" id="nombrecentrocosto" placeholder="(Seleccione)" readonly/>
									<input type="hidden" name="idCentroCosto" id="centrocostoid" placeholder="(Seleccione)"/>
								</div>
								<div class="col-md-1 xs-12" style="padding-left: 5px; padding-right: 0px;">
									<button class="btn btn-md btn-primary btn-block" type="button" id="btn_centro_costo" data-toggle="modal" data-target="#modal_centro_costo"><i class="fa fa-search"></i></button>  
								</div>
							</div>
						</div>

			              <!--Tipo de Documento-->
			              <div class="col-md-6" style="padding-bottom: 15px;">
			                  <label for="TipoDeDocumento" >Tipo de Documento(*)</label>
			                  <!--Select de Empresas disponibles-->
			                  <select class= "form-control" name="idTipoDoc" id="idTipoDoc" required>
			                    <option value="0">(Seleccione)</option>
			                    <php:repeticion id="TipoDocumentos">
			                      <option value="<php:item id="idTipoDoc" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoDoc" /><php:argumento idvalor="idTipoDoc" /></php:funcion>><php:item id="NombreTipoDoc" /></option>
			                    </php:repeticion>
			                  </select>
			              </div>

			              <!--Procesos-->
			              <div class="col-md-6" style="padding-bottom: 15px;">
			                  <label for="Proceso" >Proceso (*)</label>
			                  <!--Select de Empresas disponibles-->
			                  <select class= "form-control" name="idProceso" id="idProceso" required>
			                    <option value="0">(Seleccione)</option>
			                    <php:repeticion id="idProceso">
			                      <option value="<php:item id="idProceso" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idProceso" /><php:argumento idvalor="idProceso" /></php:funcion>><php:item id="Descripcion" /></option>
			                    </php:repeticion>
			                  </select>
			              </div>
						
					    <!--Plantilla-->
			            <div class="col-md-6 xs-12" style="padding-bottom: 15px;">
			               <label>Plantilla (*)</label>
			               <select class="form-control" name="idPlantilla" id="idPlantilla">
			                 <option value="0">( Seleccione )</option>
			               </select>
			            </div>
			        
			           <!--Tipo de Firmas-->
			           <div class="col-md-6" style="padding-bottom: 15px;">
			              <label for="Proceso" >Tipo de firma (*)</label>
			              <!--Select de Empresas disponibles-->
			              <select class= "form-control" name="idFirma" id="idFirma" required>
			                <option value="0">(Seleccione)</option>
			                <php:repeticion id="idFirma">
			                  <option value="<php:item id="idTipoFirma" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoFirma" /><php:argumento idvalor="idTipoFirma" /></php:funcion>><php:item id="Descripcion" /></option>
			                </php:repeticion>
			              </select>
			          </div>

			         <!--Seleccionar Firmantes por Empresas -->
			         <div class="form-row">
			           <div class="col-md-12">
			             <h5></h5>
			           </div>
			         </div>

			        <div class="form-row">
			            <div class="col-md-12">
			                <label id="label" style="display: none">Seleccione Firmantes</label>
			               
			                  <!-- Pasos-->
			                  <div class="steps-form-2">
			                      <div class="steps-row-2 setup-panel-2 d-flex justify-content-between">
			                          <div class="steps-step-2" id="icono_representante" style="display:none">
			                              <a href="#step-1" id="boton_emp" type="button" class="btn btn-amber btn-circle-2 waves-effect ml-0" data-placement="top" title="Empresa"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseExample"><i class="fa fa-building" aria-hidden="true"></i></a>
			                              <div id="text_emp" class="text">Firmantes</div>
			                          </div>
			                          <div class="steps-step-2" style="display:none">
			                              <a href="#step-2" id="boton_cli" type="button" class="btn btn-amber btn-circle-2 waves-effect ml-0" data-placement="top" title="Cliente"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseExample"><i class="fa fa-users" aria-hidden="true"></i></a>
			                               <div id="text_cli" class="text">Cliente</div>
			                          </div>
			                          <div class="steps-step-2" style="display:none">
			                              <a href="#step-3" id="boton_not" type="button" class="btn btn-amber btn-circle-2 waves-effect ml-0 not steps-not" data-placement="top" title="Notaria"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapseExample"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
			                              <div id="text_not" class="text">Notaria</div>
			                          </div>
			                      </div>
			                  </div>
			              
			                  <!--Firmantes de Empresas-->
			                  <div class="collapse" id="step-1">
			                   <table id="tabla_emp" class="table table-bordered table-hover">
			                    <thead>
			                      <tr>
			                          <h4> Representantes </h4>
			                      </tr> 
			                      <tr>
			                        <th style="text-align: center;">Selecci&oacute;n</th>
									<th style="text-align: center;">Rut</th>
									<th style="text-align: center;">Nombre y Apellido</th>
									<th style="text-align: center;">Cargo</th>
									<th class="columna_emp" style="text-align: center;">Orden</th>
			                      </tr>
			                    </thead>
			                    <tbody>
			                    </tbody>                 
			                   </table>
			                  </div>
			                <!--Fin de firmantes-->
			            </div>
			        </div>
			        <!--Fin de Firmantes-->
			         
			           <div class="form-row">  
			            <div class="col-md-2 xs-12 pull-right">  
			                <!--<input type="hidden" id="idWF" name="idWF"/>
			              
			                <!--Firmantes de la Plantilla-->
			                <!--<input type="hidden" id="Representantes" name="Representantes" />
							<!--<input type="hidden" id="Notario" name="Notario" />-->
			                <!--<input type="hidden" id="Empleado" name="Empleado" />
			                <input type="hidden" id="Cantidad_Firmantes" name="Cantidad_Firmantes" />
			 
							<input type="hidden" id="input_empleado" name="input_empleado" value="<php:item id="input_empleado"/>"/>-->
							
							<input type="hidden" id="idWF" name="idWF"/>
							<!--Firmantes de la Plantilla-->
							<input type="hidden" id="Representantes" name="Representantes" />
							<input type="hidden" id="Clientes" name="Clientes" />
							<input type="hidden" id="Representantes_ConOrden" name="Representantes_ConOrden" />
							<input type="hidden" id="Clientes_ConOrden" name="Clientes_ConOrden" />
							<input type="hidden" id="Empleado" name="Empleado" />
							<input type="hidden" id="Cantidad_Firmantes" name="Cantidad_Firmantes" />
							<input type="hidden" id="max" value="<php:texto id="max" />" />
							<input type="hidden" id="orden_representantes" value="<php:texto id="orden_representantes" />" />
							<input type="hidden" id="orden_clientes" value="<php:texto id="orden_clientes" />" />
							<input type="hidden" id="input_empleado" name="input_empleado" value="<php:item id="input_empleado"/>"/>
								
			                <button class="btn btn-md btn-success btn-block" type="submit" name="accion" id="GENERAR" value="GENERAR" onclick="validar();" style="margin-top: 10px">Generar</button> 

			              
			            </div>
			           </div>

					</div>	
              	   </div>

		              
              	</div>
              </div>		
			</php:repeticion>
		</form>

		<!--Modal de Lugares de pago-->

		<div class="modal fade" id="modal_lugares_pago" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Cliente </h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="mensajeError_modal"></div>
		         <table id="tabla_lugares_pago" class="table table-bordered table-hover" style="text-align: center">
		         	<thead >
		         		<tr>
		         			<th  style="text-align: center" >C&oacute;digo</th>
		         			<th  style="text-align: center" >Nombre</th>
		         			<th  style="text-align: center" >Selecci&oacute;n</th>
		         		</tr>
		         	</thead>
		         	<tbody>
		         	</tbody>
		         </table>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
		        <button type="button" class="btn btn-secondary btn-md" id="cerrar_lugares_pago" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div>
		  </div>
		</div>


		<!--Modal de Centros de Costo-->
		<div class="modal fade" id="modal_centro_costo" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Unidad de negocio</h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="mensajeError_modal"></div>
		         <table id="tabla_centro_costo" class="table table-bordered table-hover" style="text-align: center">
		         	<thead >
		         		<tr>
		         			<th  style="text-align: center" >C&oacute;digo</th>
		         			<th  style="text-align: center" >Nombre</th>
		         			<th  style="text-align: center" >Selecci&oacute;n</th>
		         		</tr>
		         	</thead>
		         	<tbody>
		         		
		         	</tbody>
		         </table>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
		        <button type="button" class="btn btn-secondary btn-md" id="cerrar_centro_costo" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div>
		  </div>
		</div>
		
		

	</div>
</div>
</div>
</div>
</div>
</section>

<script>

  /*Variables*/
	var ajax;
	var salida;
	var cantidad_firmantes;
	var arreglo_emp = [];
	var orden_emp = [];
	var nuevo_emp = {};
	var arreglo = [];
	var orden = [];
	var nuevo = {};
	var orden_representantes = $("#orden_representantes").val();
	var orden_clientes = $("#orden_clientes").val();
	
	/*******************/
	/**CAMPOS DE FECHA**/
	/*******************/
	
	$('#fechanacimiento').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });

    $('#FechaIngreso').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });

    $('#FechaInicio').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });

    $('#FechaTermino').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });

	$('#Fecha').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });
	
	$('#FechaDocumento').datepicker({
	    language: "es",
	    orientation: "bottom",
	    autoclose: true,
	    todayHighlight: true,
	    format: 'dd-mm-yyyy'
    });
	
	$(document).ready(function(){
		$("#GENERAR").attr('disabled', true);
		$("#idTipoDoc").attr("disabled",true);
		$("#idProceso").attr("disabled",true);
		$("#idPlantilla").attr("disabled",true);
		$("#idFirma").attr("disabled",true);
		$("#Documento").attr("disabled",true);
		$(".btn-file").attr("disabled",true);
		$("#archivo").attr("disabled",true);
		$("#FechaDocumento").attr("disabled",true);
		/*if ($('#progreso').attr('max') != '')
		{
		  estadoGeneracionMasiva();
		}*/
	});
  
	$("#idProceso").change(function(){

		if( $("#idProceso").val() != 0 )
		  $("#idPlantilla").attr("disabled",false);
		else{
			$("#idPlantilla").attr("disabled",true);
			$("#idFirma").attr("disabled",true);
			$("#Documento").attr("disabled",true);
			$(".btn-file").attr("disabled",true);
			$("#archivo").attr("disabled",true);

			$("#idProceso").val(0);
			$("#idPlantilla").val(0);
			$("#idFirma").val(0);
			$(".orden").val('');
			$("#Documento").val('');
			$("#archivo").val();
		}
	});

	$("#idFirma").change(function(){

		/*if( $("#idFirma").val() != 0 ){
		  $("#Documento").attr("disabled",false);
		  $(".btn-file").attr("disabled",false);
		  $("#archivo").attr("disabled",false);
		}else{
		  $("#Documento").val('');
		  $("#Documento").attr("disabled",true);
		  $(".btn-file").attr("disabled",true);
		  $("#archivo").attr("disabled",true);
		}*/
		
		mostrarFirmantes();  

		if ( $("#Representantes").val() == '' ){
			$("#GENERAR").attr('disabled', false);
		}
	});
	
  $("#idTipoDoc").change(function(){

    $("#mensajeError").removeClass("callout callout-warning");
    $("#mensajeError").html(""); 

    if( $("#idTipoDoc").val() != 0 ){
    

      var empresa = $("#RutEmpresa").val();
      var idTipoDoc = $("#idTipoDoc").val();
      $(".plan").remove();

      if( idTipoDoc != 0 && empresa != 0 ){
        var url  = "Generar_Documentos_Masivos_ajax.php?RutEmpresa=" + empresa + "&idTipoDoc=" + idTipoDoc;
     
        // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
        if( window.XMLHttpRequest )
          ajax = new XMLHttpRequest(); // No Internet Explorer
        else
          ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
       
        // Almacenamos en el control al funcion que se invocara cuando la peticion
        // cambie de estado 
        ajax.onreadystatechange = funcionCallback;

        // Enviamos la peticion
        ajax.open( "GET", url, true );
        ajax.send( "" );
      }
    }else{
       
        $("#idProceso").attr("disabled",true);
        $("#idPlantilla").attr("disabled",true);
        $("#idFirma").attr("disabled",true);
        $("#Documento").attr("disabled",true);
        $(".btn-file").attr("disabled",true);
        $("#archivo").attr("disabled",true);

        $("#idTipoDoc").val(0);
        $("#idProceso").val(0);
        $("#idPlantilla").val(0);
        $("#idFirma").val(0);
        $("#Documento").val('');
        $("#archivo").val();
        $("#idWF").val(0);
		$(".orden").val('');
    }

  });

  function funcionCallback()
  {
    // Comprobamos si la peticion se ha completado (estado 4)
    if( ajax.readyState == 4 )
    {
      // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
      if( ajax.status == 200 )
      {
        // Escribimos el resultado en la pagina HTML mediante DHTML
        //document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
        salida = ajax.responseText;

        if( salida != '' ){
            var datos = JSON.parse(salida);
           
            $.each(datos,function(key, registro) {
                $("#idPlantilla").append('<option class="plan" ' + registro.Aprobado + ' value='+ registro.idPlantilla +'>'+ registro.Descripcion_Pl+'</option>');                                      
            }); 

            $('#idProceso').attr("disabled",false);  

        }else{
            $("#mensajeError").addClass("callout callout-warning");
            $("#mensajeError").html("La Empresa seleccionada no tiene Plantillas aprobadas o asociadas"); 
            
            $("#idProceso").attr("disabled",true);
            $("#idPlantilla").attr("disabled",true);
            $("#idFirma").attr("disabled",true);
            $("#Documento").attr("disabled",true);
            $(".btn-file").attr("disabled",true);
            $("#archivo").attr("disabled",true);

            $("#idTipoDoc").val(0);
            $("#idProceso").val(0);
            $("#idPlantilla").val(0);
            $("#idFirma").val(0);
            $("#Documento").val('');
            $("#archivo").val();
            $("#idWF").val(0);
			$(".orden").val('');
        }
      }
    }
  }

	$("#idPlantilla").change(function(){

		$("#Documento").val('');

		//Ocultar firmantes 
		$("#icono_representante").hide();
		$("#icono_clientes").hide();

		$("#pdf64").val('');

		$("#GENERAR").attr('disabled', true);

		if( $("#idPlantilla").val() != 0 ){

		//habilita la subida del pdf
		$(".btn-file").attr("disabled",false);
		$("#pdf64").attr("disabled",false);
		//fin

		$("#Representates").val("");
		$("#Empleado").val("");
		$("#Cantidad_Firmantes").val("");
		$(".orden").val('');

		$("#mensajeError").removeClass("callout callout-warning");
		$("#mensajeError").html("");

		$('input[type=checkbox]').prop('checked', false);
		$("#step-1").collapse('hide');

		var idPlantilla = $("#idPlantilla").val();

		if( idPlantilla != 0 ){

		var url  = "Generar_Documentos_Masivos1_ajax.php?idPlantilla=" + idPlantilla;
		// Creamos el control XMLHttpRequest segun el navegador en el que estemos 
		if( window.XMLHttpRequest )
		ajax = new XMLHttpRequest(); // No Internet Explorer
		else
		ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer

		// Almacenamos en el control al funcion que se invocara cuando la peticion
		// cambie de estado 
		ajax.onreadystatechange = funcionCallback_Plantilla;

		// Enviamos la peticion
		ajax.open( "GET", url, true );
		ajax.send( "" );
		}
		}else{

		//deshabilita subida pdf
		$("#pdf64").attr("disabled",true);
		$(".btn-file").attr("disabled",true);
		//fin

		$("#idPlantilla").val(0);
		$("#Documento").val('');
		$("#pdf64").val();
		$("#idWF").val(0);
		$(".orden").val('');
		}

	});

	  function funcionCallback_Plantilla()
	  {
		// Comprobamos si la peticion se ha completado (estado 4)
		if( ajax.readyState == 4 )
		{
		  // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
		  if( ajax.status == 200 )
		  {
			// Escribimos el resultado en la pagina HTML mediante DHTML
			//document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
			salida = ajax.responseText;
		
			if( salida != '' ){ 
		
				var datos = JSON.parse(salida);
				var max = $("#max").val();

				$.each(datos,function(key, registro) {
					//2 : Representante 
					//3 : Empleado
					//11: Cliente
					if( registro.idEstado == 2 ){
						$("#Representantes").val("1");
						if ( registro.ConOrden === 1 ){
							$(".columna_emp").css("display","block");
						}else{
							$(".columna_emp").css("display","none");
						}
					}
					
					if( registro.idEstado == 11 ){
						$("#Clientes").val("1");
						if ( registro.ConOrden === 1 ){
							$(".columna_cli").css("display","block");
						}else{
							$(".columna_cli").css("display","none");
						}
					}        

					$("#Cantidad_Firmantes").val('n'); 
					$("#idWF").val(registro.idWF);  
					$("#idFirma").attr("disabled",false);				
				}); 
			
			}else{
				$("#mensajeError").removeClass("callout callout-warning");
				$("#mensajeError").html("");
			}
		  }
		}
	 }
	
	$("#archivo").change(function(){

		$("#Documento").val($("#archivo").val());

		if( $("#Documento").val() != '' ){
		  mostrarFirmantes();  

		  if ( $("#Representantes").val() == '' ){
			$("#GENERAR").attr('disabled', false);
		  }
		}

	});
  
	function mostrarFirmantes(){

		var Representantes = $("#Representantes").val();

		if( Representantes != '' ){
			$("#icono_representante").show();
			$("#label").show();
		}

		if( $("#Clientes").val() != '' ){
			$("#icono_clientes").show();
		}

		$("#Representantes").val('');
		$("#Clientes").val('');
	}
	
	/*******************************/
	/**BUSCAR FIRMANTES DE EMPRESA**/
	/*******************************/

   $("#RutEmpresa").change(function(){
            
      var RutEmpresa = $("#RutEmpresa").val();

      $("#mensajeError").removeClass("callout callout-warning");
      $("#mensajeError").html("");
      $("#idTipoDoc").attr("disabled",true);
      $("#idProceso").attr("disabled",true);
      $("#idPlantilla").attr("disabled",true);
	
	  //para deshabilitar la subida del pdf
  	  $("#pdf64").attr("disabled",true);
	  $(".btn-file").attr("disabled",true);
	  //fin
     
      $("#idTipoDoc").val(0);
      $("#idProceso").val(0);
      $("#idPlantilla").val(0);
      $("#Documento").val('');
      $("#archivo").val();
      $("#idWF").val(0);
      $(".plan").remove();
	  $(".orden").val('');
	  $("#nombrecentrocosto").val('');
	  $("#idCentroCosto").val('');

      //Limpiar tabla 
      $(".fila").remove();

      //Ocultar firmantes 
      $("#icono_representante").hide();
      $("#label").hide();
      $("#step-1").collapse('hide');

      if( RutEmpresa != 0 ){
        
		//$("#idTipoDoc").attr("disabled",false);
        //$("#idTipoDoc").val(0);
		$("#FechaDocumento").attr("disabled",false);
        $("#FechaDocumento").val('');

        var url  = "Generar_Documentos_Masivos2_ajax.php?RutEmpresa=" + RutEmpresa;

        // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
        if( window.XMLHttpRequest )
          ajax = new XMLHttpRequest(); // No Internet Explorer
        else
          ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
       
        // Almacenamos en el control al funcion que se invocara cuando la peticion
        // cambie de estado 
        ajax.onreadystatechange = funcionCallback_Empresa;

        // Enviamos la peticion
        ajax.open( "GET", url, true );
        ajax.send( "" );
      }
  });

  function funcionCallback_Empresa()
  {
    // Comprobamos si la peticion se ha completado (estado 4)
    if( ajax.readyState == 4 )
    {
      // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
      if( ajax.status == 200 )
      {
        // Escribimos el resultado en la pagina HTML mediante DHTML
        //document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
        salida = ajax.responseText;

        try {
	        var datos = JSON.parse(salida);
	     	$.each(datos,function(key, registro) {                            
			   var fila_orden = '';
               fila_orden = "<tr align='center' class='fila'><td ><input type='checkbox' name='Firmantes_Emp[]' class='f_emp' value='" + registro.personaid + "'id='emp_" + registro.incremental + "'  onclick='seleccion(" + registro.incremental + ");'/> </td><td>" + registro.personaid + "</td><td>" + registro.nombrecompleto +"</td><td>" +  registro.descripcion + "</td><td class='columna_emp'><input name='orden_emp_" + registro.personaid + "'' id='orden_emp_" + registro.personaid + "' class='orden_emp' style='text-align:center; border: none;' readonly /></td></tr>";
               $("#tabla_emp tr:last ").after(fila_orden);
		   });         
	       
        }catch(e) {
		
			if( salida == '' ){
				$("#mensajeError").addClass("callout callout-warning");
				$("#mensajeError").html("La empresa seleccionada no tiene firmantes asociados");
			}
        }

      }
    }
  }
  
	/**************************************/
	/**SELECCION DE FIRMANTES POR EMPRESA**/
	/**************************************/
	
	function seleccion(id){

		var cantidad_clientes = $('.f_cli:checked').length; 
		var cantidad_firmantes = $('.f_emp:checked').length; 

		var max_firmantes = $("#max").val();
		var cant = cantidad_firmantes + cantidad_clientes; 

		if ( cantidad_firmantes == 0 ){

			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Debe seleccionar al menos un Firmante, seg&uacute;n el flujo de firma de la Plantilla seleccionada" );
			$("#GENERAR").attr('disabled', true);						   
			$('.f_emp').prop("checked",false);
			$(".orden_emp").val('');
			
			return false;

		}else{
			
			$("#mensajeError").removeClass("callout callout-warning");
			$("#mensajeError").html("");
									 
			
				//Colocar orden 
				var rutempresa = $("#emp_" + id).val();

				if($('#emp_'+ id).is(':checked')){
					$("#orden_emp_" + rutempresa ).val(cantidad_firmantes);	   
				}else{
				
					//if( $("#Representantes_ConOrden").val() == 1 ){
						//cantidad_firmantes = $('.f_emp:checked').length; 
						
						//Actualizar arreglo
						convertirArreglo_emp();
						$("#orden_emp_" + rutempresa ).val('');
						cantidad_firmantes = $('.f_emp:checked').length; 
						
						if ( cantidad_firmantes == 1 ){
			
							if( confirm(' Desea reiniciar el orden de los firmantes ?')){
								//Si 
								$(".f_emp").prop("checked",false);
								$(".orden_emp").val('');
							}else{	
														
								for( i = 1; i < ($("#tabla_emp tr").length + 1) ; i++ ){
									rutempresa = $("#emp_" + i).val();
									
									var orden_rc = $("#orden_emp_" + rutempresa).val(); 
									if ( orden_rc != '' ) {
										$("#orden_emp_" + rutempresa ).val('1');
									}
								}
							}
						}
										
					if ( cantidad_firmantes > 1 ){

						if( confirm(' Desea reiniciar el orden de los firmantes ?')){
							//Si 
							$(".f_emp").prop("checked",false);
							$(".orden_emp").val('');
						}else{
							convertirArreglo_emp();
							nuevo_emp = convertirItem(arreglo_emp, orden_emp);
							var items = nuevo_emp;

							items.sort(function (a, b) {
							  if (a.orden > b.orden) {
								return 1;
							  }
							  if (a.orden < b.orden) {
								return -1;
							  }
							  // a must be equal to b
							  return 0;
							});
								
							reasignarOrden(items,'emp_');
						}
					}else{
						$("#orden_emp_" + rutempresa ).val('');
					}
				}
		}
		
		cantidad_firmantes = $('.f_emp:checked').length;
		if( cantidad_firmantes > 0 ) $("#GENERAR").attr("disabled",false);
		else  $("#GENERAR").attr("disabled",true);
	}
	
	/****************************/
	/**OPERACIONES DE SELECCION**/
	/****************************/
	
	function reasignarOrden(items,emp){
		
		for ( i = 0; i < items.length ; i++ ){
			var rut = $("#" + items[i].id).val(); 
			
			if( emp != '' )
				$("#orden_" + emp + rut).val(i+1);
			else
				$("#orden_" + rut).val(i+1);
		}
	}

	function convertirArreglo(){
		
		arreglo = [];
		var rut = '';
		var orden_id = '';

		$(".f_cli").each(function (index) {  
			
			if( $(this).is(':checked') ){
				rut = this.id;
				orden_id = $("#orden_"+ $("#" + this.id).val()).val();
				arreglo.push(this.id);
				orden.push(orden_id);
			}
		});
	}

	function convertirArreglo_emp(){
		
		arreglo_emp = [];
		orden_emp = [];
		var rut = '';
		var orden_id = '';

		$(".f_emp").each(function (index) {  
			
			if( $(this).is(':checked') ){
				rut = this.id;
				orden_id = $("#orden_emp_" + $("#" + this.id).val()).val();
				arreglo_emp.push(this.id);
				orden_emp.push(orden_id);
			}
		});
	}

	function convertirItem(arreglo1,arreglo2){

		var data = new Object();
		var array = new Array();
		
		$.each(arreglo1, function (ind, elem){ 

			var data = new Object();

			data.id = elem;
			data.orden = arreglo2[ind];
			array[ind] = data;
		}); 	

		return array;
	}
	
	/**********************/
	/**VALIDAR FORMULARIO**/
	/**********************/
	
	function validar(){

		if ( $("#RutEmpresa").val() == 0 ){
			$("#RutEmpresa").focus();
			OcultarCargando();
			return false;
		}
		if ( $("#idTipoDoc").val() == 0 ){
			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Seleccione el tipo de documento");
			$("#idTipoDoc").focus();
			OcultarCargando();
			return false;
		}

		if( $("#idProceso").val() == 0 ){
			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Seleccione un Proceso");
			$("#idProceso").focus();
			OcultarCargando();
			return false;
		}

		if( $("#idPlantilla").val() == 0 ){
			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Seleccione la plantilla");
			$("#idPlantilla").focus();
			OcultarCargando();
			return false;
		}
		if( $("#idFirma").val() == 0 ){
			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Seleccione el tipo de firma del documento");
			$("#idFirma").focus();
			OcultarCargando();
			return false;
		}
		if( $("#Documento").val().length == 0 ){
			$("#mensajeError").addClass("callout callout-warning");
			$("#mensajeError").html("Seleccione el archivo de carga que necesita");
			$("#Documento").focus();
			OcultarCargando();
			return false;
		}
		return true;
	}
  
  /************************/
	/**VALIDAR RUT EMPLEADO**/
	/************************/
	$("#newusuarioid").change(function(){

  		var RutUsuario = $("#newusuarioid").val();
  		var url  = "Generar_Documento_PorFicha_ajax.php?personaid=" + RutUsuario;

        // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
        if( window.XMLHttpRequest )
          ajax = new XMLHttpRequest(); // No Internet Explorer
        else
          ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
       
        // Almacenamos en el control al funcion que se invocara cuando la peticion
        // cambie de estado 
        ajax.onreadystatechange = funcionCallback_rutusuario;

        // Enviamos la peticion
        ajax.open( "GET", url, true );
        ajax.send( "" );
  });

  function funcionCallback_rutusuario()
  {
    // Comprobamos si la peticion se ha completado (estado 4)
    if( ajax.readyState == 4 )
    {
      // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
      if( ajax.status == 200 )
      {
        // Escribimos el resultado en la pagina HTML mediante DHTML
        salida = ajax.responseText;
        datos = JSON.parse(salida);

        if( salida != '' ){ 

        	$("#nombre").val( datos.nombre + ' ' + datos.appaterno + ' ' + datos.apmaterno);
        	$("#fechanacimiento").val( datos.fechanacimiento );
        	$("#correo").val(datos.correo);
        	$("#nacionalidad").val(datos.nacionalidad);
        	$("#direccion").val(datos.direccion); 
        	$("#comuna").val(datos.comuna);
        	$("#ciudad").val(datos.ciudad);
        	$("#idEstadoCivil").val(datos.estadocivil);
			$("#Profesion").val(datos.Profesion);

        	var idestado = '#idEstadoCivil option[value="'+ datos.estadocivil + '"]';
        	$(idestado).attr("selected",true);

        	var rolid = '#rolid option[value="'+ datos.rolid +'"]'; 
        	$(rolid).attr("selected", true);

        }else{
            $("#mensajeError").removeClass("callout callout-warning");
            $("#mensajeError").html("");
        }
      }
    }
  }
	
	/********************/
	/**MODAL LUGAR PAGO**/
	/********************/
	
  $("#btn_lugares_pago").click(function(){

  	var RutEmpresa = $("#RutEmpresa").val();
  	$(".fila_lp").remove();
  	if( RutEmpresa == 0 ){

  		$("#mensajeError").addClass("callout callout-warning");
  		$("#mensajeError").html("Debe seleccionar la Empresa");
  		return false;

  	}else{

  		$("#mensajeError").html("");
  		$("#mensajeError").removeClass("callout callout-warning");
  		

		var url  = "Generar_Documento_PorFicha_ajax1.php?RutEmpresa=" + RutEmpresa;

	    // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
	    if( window.XMLHttpRequest )
	      ajax = new XMLHttpRequest(); // No Internet Explorer
	    else
	      ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
	   
	    // Almacenamos en el control al funcion que se invocara cuando la peticion
	    // cambie de estado 
	    ajax.onreadystatechange = funcionCallback_lugarespago;

	    // Enviamos la peticion
	    ajax.open( "GET", url, true );
	    ajax.send( "" );
	}

  });

  function funcionCallback_lugarespago()
  {
    // Comprobamos si la peticion se ha completado (estado 4)
    if( ajax.readyState == 4 )
    {
      // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
      if( ajax.status == 200 )
      {
        // Escribimos el resultado en la pagina HTML mediante DHTML
        salida = ajax.responseText;
        listado = JSON.parse(salida);
     	num = listado.length;

     	if( num > 0 ){
	       	$.each(listado, function( index, value ) {
		 		$('#tabla_lugares_pago tr:last').after('<tr class="fila_lp"><td>' + listado[index].lugarpagoid + '</td><td><div id="' + listado[index].lugarpagoid + '">' + listado[index].nombrelugarpago + ' </div></td><td ><button type="button" style="background-color: transparent;" class="btn" name="btn_agregar_lp" id="btn_agregar_lp" onclick="agregarLp(' + listado[index].lp + ');"><i class="fa fa-plus" aria-hidden="true"></i></button></td></tr>');
		 	});
		}
		else{
			$('#tabla_lugares_pago tr:last').after('<tr class="fila_lp"><td colspan = 3>No existe Clientes de la Empresa seleccionada</td></tr>');
		}
      }
    }
  }

  function agregarLp(i){
 
  	$("#lugarpagoid").val(i);
  	$("#nombrelugarpago").val($("#" + i ).html());
  	$("#cerrar_lugares_pago").click();
  }
  

  /*************************/
  /**MODAL CENTRO DE COSTO**/
  /*************************/
	
  $("#btn_centro_costo").click(function(){

  	var RutEmpresa = $("#RutEmpresa").val();
  	var LugarPagoid = $("#lugarpagoid").val();
	
  	$(".fila_cc").remove();

  	if( RutEmpresa == 0 ){

  		$("#mensajeError").addClass("callout callout-warning");
  		$("#mensajeError").html("Debe seleccionar la Empresa");
  		return false;

  	}

  	if( LugarPagoid == '' ){

  		$("#mensajeError").addClass("callout callout-warning");
  		$("#mensajeError").html("Debe seleccionar Lugar de Pago");
  		return false;

  	}

	$("#mensajeError").html("");
	$("#mensajeError").removeClass("callout callout-warning");
	
	var url  = "Generar_Documento_PorFicha_ajax2.php?RutEmpresa=" + RutEmpresa + "&lugarpagoid=" + LugarPagoid;

    // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
    if( window.XMLHttpRequest )
      ajax = new XMLHttpRequest(); // No Internet Explorer
    else
      ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
   
    // Almacenamos en el control al funcion que se invocara cuando la peticion
    // cambie de estado 
    ajax.onreadystatechange = funcionCallback_centrocosto;

    // Enviamos la peticion
    ajax.open( "GET", url, true );
    ajax.send( "" );


  });

  function funcionCallback_centrocosto()
  {
    // Comprobamos si la peticion se ha completado (estado 4)
    if( ajax.readyState == 4 )
    {
      // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
      if( ajax.status == 200 )
      {
        // Escribimos el resultado en la pagina HTML mediante DHTML
        salida = ajax.responseText;
        listado = JSON.parse(salida); 
     	num = listado.length;
     	if( num > 0 ){
	       	$.each(listado, function( index, value ) {
		 		$('#tabla_centro_costo tr:last').after('<tr class="fila_cc"><td>' + listado[index].centrocostoid + '</td><td><div id="' + listado[index].centrocostoid + '">' + listado[index].nombre + ' </div></td><td ><button type="button" style="background-color: transparent;" class="btn" name="btn_agregar_cc" id="btn_agregar_cc" onclick="agregarCC(' + listado[index].cc + ');"><i class="fa fa-plus" aria-hidden="true"></i></button></td></tr>');
		 	});
		 }else{
			$('#tabla_centro_costo tr:last').after('<tr class="fila_cc"><td colspan=3 >No existen Centros de Costo para la Empresa y la Unidad de negocio seleccionada</td></tr>');
		}
      }
    }
  }

  function agregarCC(i){
  	$("#centrocostoid").val(i);
  	$("#nombrecentrocosto").val($("#"+i).html());
  	$("#cerrar_centro_costo").click();
	
	$("#idTipoDoc").attr("disabled",false);
	$("#idTipoDoc").val(0);
  }
  
</script>
