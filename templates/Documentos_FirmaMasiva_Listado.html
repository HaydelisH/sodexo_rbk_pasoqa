<div class="row">
  <div class="col-md-12">
    <div class="box">
      <div class="box-body pad table-responsive"> 
        <div class="box-body">
           <!--Mensajes-->
          <div id="mensajeOK"><php:texto id="mensajeOK" /></div>
          <div id="mensajeError"><php:texto id="mensajeError" /></div>      
        </div>
        <form name="formulario2" id="formulario_usuarios" action="Documentos_FirmaMasiva.php" method="POST" autocomplete="off">
          <table id="example2" class="table table-bordered table-hover">
	          <div class="col-md-2 xs-12">
		        <button class="btn btn-md btn-default btn-block ocultar" type="button" style="margin-top: 10px" data-toggle="collapse" href="#collapseExample" role="button" data-parent="#accordion"><a id="a">Ocultar Filtro</a></button>
	          </div>
          </table>
      		<div class="collapse in" id="collapseExample">
      		<!--<div class="row">-->
      			<div class="col-md-12">
      				<div class="box">
      					<div class="box-body pad table-responsive">
      					  <div class="box-header">
      						  <div class="form-group">
							 <php:repeticion id="formulario">
   
        						   <div class="form-row">
        						    <div class="col-md-4 xs-12">
        							    <label for="idDocumento">Nro Documento</label>
        							    <input type="text" class="form-control iddocumento" name="idDocumento" value="<php:item id="idDocumento" />" id="idDocumento" placeholder="Nro Documento" /> 
        							   
        							  </div>
        						  </div>

        						  <!--<div class="form-row">
        						    <div class="col-md-4 xs-12">
        							    <label for="fichaid">C&oacute;digo de Ficha de Contrataci&oacute;n</label>
        							    <input type="text" class="form-control" id="fichaid" name="fichaid" value="<php:item id="fichaid" />" placeholder="C&oacute;digo de Ficha de Contrataci&oacute;n" />
        							  </div>
        						  </div>-->

	    							<div class="form-row">
	    							  <div class="col-md-4 xs-12">
	    							    <label for="NombreTipoDoc">Tipo Documento</label>
										<select class= "form-control" name="idTipoDoc" id="idTipoDoc" >
											<option value="0">(Seleccione)</option>
											<php:repeticion id="tiposdocumentos">						
												<option value="<php:item id="idTipoDoc" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoDoc" /><php:argumento idvalor="idTipoDoc" /></php:funcion>><php:item id="NombreTipoDoc" /></option>
											</php:repeticion>
										</select>										  
										  
	    							  </div>
	    							</div>

        							<!--Proceso-->
									<div class="form-row">
										<div class="col-md-4 xs-12">
											<label for="Nombre">Proceso</label>	
											<select class="form-control" name="idProceso" id="idProceso" >
												<option value="0">(Seleccione)</option>
												<php:repeticion id="Procesos">						
													<option value="<php:item id="idProceso" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idProceso" /><php:argumento idvalor="idProceso" /></php:funcion>><php:item id="Descripcion" /></option>
												</php:repeticion>
											</select>	
										</div>
									</div>

        							<div class="form-row">
        							  <div class="col-md-4 xs-12">
        							    <label for="Nombre">Estado Documento</label>	
										<select class="form-control" name="idEstado" id="idEstado" >
										<option value="0">(Seleccione)</option>
										<php:repeticion id="estadocontratos">						
											<option value="<php:item id="idEstado" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idEstado" /><php:argumento idvalor="idEstado" /></php:funcion>><php:item id="Descripcion" /></option>
										</php:repeticion>
										</select>	
        							  </div>
        							</div>

        							<!--<div class="form-row">
        							  <div class="col-md-4 xs-12">
        							    <label for="Nombre">Tipo de Firma</label>	
        								<select class="form-control" name="idTipoFirma" id="idTipoFirma" >
										<option value="0">(Seleccione)</option>
										<php:repeticion id="TipoFirmas">						
											<option value="<php:item id="idTipoFirma" />" <php:funcion id="ContenedorUtilidades::evaluarSeleccion"><php:argumento id="idTipoFirma" /><php:argumento idvalor="idTipoFirma" /></php:funcion>><php:item id="Descripcion" /></option>
										</php:repeticion>
										</select>	
        							  </div>
        							</div>-->

				      		        <div class="form-row">
				            			<div class="col-md-2 xs-12 pull-right"  style="margin-top: 30px;">
				            				<input type="hidden" name="accion" value="BUSCAR" />
				            				<button class="btn btn-md btn-primary btn-block"  name="accion2" type="submit" value="BUSCAR">Buscar</button>
				            			</div>
				                  	</div>
                    </div> <!-- <div class="form-group">-->
                  </div> <!--<div class="box-header">-->
                </div> <!-- <div class="box-body pad table-responsive">-->
              </div> <!-- <div class="box">-->
            </div> <!-- <div class="col-md-12">-->
          <!--</div> <!--<div class="row"> -->
      	</div> <!-- <div class="collapse" id="collapseExample"> -->
      </form>
       
    <!--Tabla-->
    <form id="formulario3" name="formulario3" method="POST" action="Documentos_FirmaMasiva.php">
		<div id="divtabla" class="tabla-responsiva" >
		  <div class="col-md-12">
			<table id="example" class="table table-bordered table-hover " name="tbltabla">
				  <thead>
					<tr>
						<th style="text-align: center; vertical-align: middle;"><input type="checkbox" id="Seleccion"/></th>
						<th style="text-align: center;" data-campo="NroDocumento">Nro Documento</th>
						<th style="text-align: center;" data-campo="Tipo Documento">Tipo Documento </th>
						<th style="text-align: center;" bdata-campo="Proceso">Proceso </th>
						<th style="text-align: center;" data-campo="Estado ">Estado </th>
						<th style="text-align: center;" data-campo="TipoFirma">Tipo de Firma</th>
						<th style="text-align: center;" data-campo="Fecha creacion">Fecha de creaci&oacute;n</th>
						<th style="text-align: center;" data-campo="Plazo Firmante">Plazo Firmante</th>
						<th style="text-align: center;" data-campo="Plazo Flujo">Plazo Flujo</th>
						<th style="text-align: center;" data-campo="Detalle">Detalle</th>
					</tr>
				  </thead>
				<tbody>
					  <!--Contenido de Tabla-->
				<php:repeticion id="listado">
				  <tr>
				  	<td style="text-align: center; vertical-align: middle;">
				  	 	<input type="checkbox" aria-label="Checkbox for following text input" name="Documentos[]"  value='<php:item id="idDocumento"/>' class="checkbox" />
				  	</td>
					<td style="text-align: center;" data-campo="Nro Documento"><php:item id="idDocumento" /></td>
					<td style="text-align: center;" data-campo="Tipo Documento"><php:item id="NombreTipoDoc" /></td>
					<td style="text-align: center;" data-campo="Proceso"><php:item id="Proceso" /></td>
					<td style="text-align: center;" data-campo="Estado"><php:item id="Estado" /></td>
					<td style="text-align: center;" data-campo="TipoFirma"><php:item id="Firma" /></td>
					<td style="text-align: center;" data-campo="Fecha Creacion"><php:item id="FechaCreacion" /></td>
					<td style="text-align: center;" data-campo="Plazo Firmante"><php:item id="semaforodetalle" /></td>
					<td style="text-align: center;" data-campo="Plazo Flujo"><php:item id="semaforototal" /></td>
					
		
					</form>
					<td data-campo="Detalle">
					  <form name="formulario" id="formulario_tipo_<php:filamenos />" action="Documentos_FirmaMasiva.php" method="POST">
						   <input type="hidden" name="idDocumento" id="idDocumento_<php:item id="idDocumento" />" value="<php:item id="idDocumento" />" />
						   <input type="hidden" name="ruta" id="ruta_<php:item id="idDocumento" />" value="<php:item id="ruta" />">
						   <input type="hidden" name="pagina" value="<php:texto id="pagina" />">
						   <input type="hidden" name="nombrex" value="<php:texto id="nombrex" />">
						   <button class="btn btn-primary btn-sm" name="accion" value="DETALLE" type="submit" >Detalle</button>

							<php:repeticion id="ver">
								<button class="btn btn-info btn-sm vista" name="accion" id="vista_<php:item id="idDocumento" />" value="VISTA" type="button"  data-toggle="modal" data-target="#modal_vp" >Ver Documento</button>  
					   			<button class="btn btn-default btn-sm firmantes" name="accion"  id="firm_<php:item id="idDocumento" />" value="FIRMANTES" type="button"  data-toggle="modal" data-target="#modal_firm">Ver Firmantes</button>
					   		</php:repeticion>
					  </form>
					</td>
				  </tr>
				</php:repeticion>
				</tbody>
	
				<th colspan=14 class="tabla_abajo">
					<div class="col-md-12" style="font-weight: normal;">
	                 	<php:item id="pagina_actual" /> de <php:item id="pagina_ultimo" /> - Total <php:item id="total_registros" /> Registros
	              	</div>
				  <div class="col-xs-offset-5"> 
					<nav aria-label="nav1">
					  <ul class="pagination justify-content-center" style="margin-top: 0px; margin-bottom: 0px;">
						<li class="page-item ">
						  <a id="pagina_primera" class="page-link" href="#" tabindex="-1" onclick="javascript:proc_paginado(<php:item id="pagina_primera" />);" ><span><i class="fa fa-angle-double-left"></i></span></a>
						</li>
						<li class="page-item ">
						  <a id="pagina_anterior" class="page-link" href="#" tabindex="-1" onclick="javascript:proc_paginado(<php:item id="pagina_anterior" />);" ><span ><i class="fa fa-angle-left"></i></span></a>
						</li>                  
						<li class="page-item active"><a class="page-link1" href="#"><php:item id="pagina_actual" /></a></li>                              
						<li class="page-item">
						  <a id="pagina_siguente" class="page-link" href="#" onclick="javascript:proc_paginado(<php:item id="pagina_siguente" />);" ><span><i class="fa fa-angle-right"></i></span></a>
						</li>
					  <li class="page-item">
						<a id="pagina_ultimo" class="page-link" href="#" onclick="javascript:proc_paginado(<php:item id="pagina_ultimo" />);" ><span><i class="fa fa-angle-double-right"></i></span></a>
					  </li>                                                     
					  </ul>
					</nav>
				  </div>
				  </th>
				<form name="paginado" id="paginado" action="Documentos_FirmaMasiva.php" method="POST" >
					<input type="hidden" name="pagina" value="" id="pagina" >
					<input type="hidden" name="holdingid" value="<php:item id="holdingid" />" >
					<input type="hidden" name="idDocumento" value="<php:item id="idDocumento" />" >
					<input type="hidden" name="idTipoDoc" value="<php:item id="idTipoDoc" />" >
					<input type="hidden" name="idEstado" value="<php:item id="idEstado" />" >
					<input type="hidden" name="idTipoFirma" value="<php:item id="idTipoFirma" />" >
					<input type="hidden" name="idProceso" value="<php:item id="idProceso" />" >
					<input type="hidden" name="Firmante"    value="<php:item id="Firmante" />" >
				  	<input type="hidden" name="total_registros" id="total_registros" value="<php:item id="total_registros" />" />
				  	<input type="hidden" name="cantidad" id="cantidad" value="<php:item id='cantidad'/>"/>
				  	<!--Documentos a firmar-->
				  	<input type="hidden" name="docs" id="docs" value="<php:item id='docs' />"/>
				  	<input type="hidden" name="pag" id="pag"  value="<php:item id='pag' />"/>
				</form>
	
			</table>
				<input type="hidden" name="select" id="select"/>
			    <div class="form-row">
	    			<div class="col-md-2 xs-12 pull-right">
	    				<input type="hidden" name="docs" id="docs_form" />
	    				<input type="hidden" name="accion" value="FIRMA_MASIVA"/>
	    				<!--Datos de los filtros-->
	    				<input type="hidden" name="idDocumento" value="<php:item id="idDocumento" />" >
						<input type="hidden" name="idTipoDoc" value="<php:item id="idTipoDoc" />" >
						<input type="hidden" name="idEstado" value="<php:item id="idEstado" />" >
						<input type="hidden" name="idTipoFirma" value="<php:item id="idTipoFirma" />" >
						<input type="hidden" name="idProceso" value="<php:item id="idProceso" />" >
	    				
	    				<input type="hidden" name="usuarioid" id="usuarioid" value="<php:item id='usuarioid' />"/>
	    				<input type="hidden" name="ptipousuarioid" id="ptipousuarioid" value="<php:item id='ptipousuarioid' />"/>
    					<button class="btn btn-md btn-success btn-block"  name="accion" id="FIRMA_MASIVA" type="button" value="FIRMA_MASIVA" >Firmar</button>
	    			</div>
	          	</div>
		   </div>
		</form>
       </php:repeticion>

       <!-- Modal para Vista previa-->
		<div class="modal fade bd-example-modal-lg" id="modal_vp" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Vista Previa de Documento <h3 id="num"></h3></h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="mensajeError_modal"></div>
		         	<div style="clear:both">
			           <iframe id="viewer" width="100%" height="600px"></iframe>
			        </div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
				<input type="hidden" name="idDocumento" value='<php:item id="idDocumento"/>' >
		        <button type="button" class="btn btn-secondary btn-md" id="cerrar" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div>
		  </div>
		</div>

		<!-- Modal para Firmantes-->
		<div class="modal fade" id="modal_firm" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		  <div class="modal-dialog" >
		    <div class="modal-content">
		      <div class="modal-header" align="center">
		        <h4 class="modal-title" id="ejemplo-titulo"> Firmantes <h3 id="num"></h3></h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	<div id="divtabla" class="tabla-responsiva" >
					<table id="tabla_firm" class="table table-bordered table-hover " >
						  <thead>
							<tr>
								<th style="text-align: center;" data-campo="Rut">Rut</th>
								<th style="text-align: center;" data-campo="Nombre">Nombre</th>
								<th style="text-align: center;" data-campo="Fecha Firma">Fecha Firma</th>
							</tr>
						  </thead>
						<tbody>
						<!--Contenido de Tabla-->
						</tbody>
					</table>
				</div>
			  </div>
			  <div class="modal-footer" style="margin-top:10px;">
			      	<input type="hidden" name="idDocumento" value='<php:item id="idDocumento"/>' >
		        	<button type="button" class="btn btn-secondary btn-md" id="cerrar" data-dismiss="modal">Cerrar</button>
		       </div>
		    </div>
		  </div>
		</div>

      </div>
    </div>
  </div>
</div> 
</section>

<script>

	var array = [];
	var docs;
	var proceso;

	//Actualizar la seleccion
	$(document).ready(function(){

		if( $("#cantidad").val() == 1 ){
			$("#Seleccion").prop('checked', true);
			$("#select").val(1);
		}

		//documentos de otras paginas
		var docs = $("#docs").val();
		if ( docs != '' ){
			var docs_res = docs.split(",");

			$("#FIRMA_MASIVA").attr('disabled', false);

			//Recorro el array que traje de php
			jQuery.each( docs_res, function( key, value ) {
				if( value != '' ){
			  		array.push(value);
			  	}
			  //Recorro todos los checkbox del listado 
			  $('.checkbox').each( function(){
			  	 if ( value == $(this).val() ){
			  	 	$(this).prop('checked', true);
			  	 }
			  });
			});
		}else{
			$("#FIRMA_MASIVA").attr('disabled',true);
		}
	});

	//Seleccionar todo
	$("#Seleccion").change(function(){

		var status = this.checked; 
		var array_aux = [];

		if ( $("#Seleccion").is(':checked')){

			//Limpian todos los campos 
			array = [];
			$("#docs").val('');
			$("#cantidad").val(1);
			$("#select").val(1);

			//Vamos al ajax a buscar todos los documentos pendientes 
			proceso = setInterval(function(){ buscarTodosDocumentosPorFirma() }, 100);

			$("#FIRMA_MASIVA").attr('disabled', false);
		}else{
			//Limpian todos los campos 
			array = [];
			$("#docs").val('');
			$("#cantidad").val(0);
			$("#select").val(0);
			$(".checkbox").prop('checked',false);

		}
				
	});

	$('.checkbox').change(function(){
		//Agregar 
		if ( $(this).is(':checked') ){
			array.push($(this).val());
		}
		//Eliminar
		else{
			var k = $(this).val();
			jQuery.each( array, function( key, value ) {
			  if( k == value ){
			  	array.splice(key, 1);
			  }
			});
		}
		//Pasar al formulario
		$("#docs").val(array);

		if( $("#docs").val() != '' )
			$("#FIRMA_MASIVA").attr('disabled', false);
		else
			$("#FIRMA_MASIVA").attr('disabled', true);
	});

	//Vista previa del documento 
	/*$(".vista").click(function(){
		var id = this.id; 
		var resultado = id.split("_"); 
		var i = resultado[1];
		var ruta = $("#ruta_"+ i ).val();

		$("#viewer").attr("src",ruta);
		$("#num").html('Documento : ' + i);
	});*/
	
	//Vista previa del documento 
	$(".vista").click(function(){ 
		
		var id = this.id; //console.log(id);
		var res = id.split('_'); //console.log(res);
		var i = res[1];//console.log(i);
		var idDocumento = $("#idDocumento_" + i).val();//console.log(idDocumento);
		id_doc = idDocumento;
		var url = "Documentos_aprobar4_ajax.php?idDocumento=" + idDocumento; //Descargar Documento
		//console.log(url);
		 // Creamos el control XMLHttpRequest segun el navegador en el que estemos 
		if( window.XMLHttpRequest )
		   ajax = new XMLHttpRequest(); // No Internet Explorer
		else
		   ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer
		
		   // Almacenamos en el control al funcion que se invocara cuando la peticion
		ajax.onreadystatechange = funcionCallback_descargarDoc;

		// Enviamos la peticion
		ajax.open( "GET", url, false);
		ajax.send( "" );
	});
	
	//Callback de Vista previa
	function funcionCallback_descargarDoc(){
	  // Comprobamos si la peticion se ha completado (estado 4)
	  if( ajax.readyState == 4 )
	  {
	    // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
	    if( ajax.status == 200 )
	    {
	      // Escribimos el resultado en la pagina HTML mediante DHTML
	      //document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
	      salida = ajax.responseText;

	      if(salida){
	      	
			var ruta = salida;
			$("#viewer").attr("src",ruta);
			$("#num").html('Documento : ' + id_doc);
			
	      }else{
	      	return false;
	      }
	    }
	  }
	}


	var ajax;
	var salida;
	var fila = 0;
	
	//Vista previa de firmantes 
	$(".firmantes").click(function(){

		fila = this.id; 
		var resultado = fila.split("_"); 
		var i = resultado[1];
	
		var idDocumento = $("#idDocumento_" + fila).val();
		var url = "Documentos_firmaMasiva_ajax.php?idDocumento=" + i;

		// Creamos el control XMLHttpRequest segun el navegador en el que estemos 
		if( window.XMLHttpRequest )
		ajax = new XMLHttpRequest(); // No Internet Explorer
		else
		ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer

		// Almacenamos en el control al funcion que se invocara cuando la peticion
		// cambie de estado 
		ajax.onreadystatechange = funcionCallback;

		// Enviamos la peticion
		ajax.open( "GET", url, true );
		ajax.send( "" );
	});

	//Callback de Vista previa
	function funcionCallback(){
	  // Comprobamos si la peticion se ha completado (estado 4)
	  if( ajax.readyState == 4 )
	  {
	    // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
	    if( ajax.status == 200 )
	    {
	      // Escribimos el resultado en la pagina HTML mediante DHTML
	      //document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
	      salida = ajax.responseText;

	      if(salida){
	      	verFirmantes(salida);
	      }else{
	      	return false;
	      }
	    }
	  }
	}

	//Construir tabla de firmantes
	function verFirmantes(salida){

		  respuesta = salida.split("|");
	      count = 0;
	      count = respuesta.length;
	      j = 0; 
	      n = 0;
	      rep = Math.trunc(count/5);

	      //Eliminar filas ateriores
	      $(".fila").remove();

	      while ( j < rep ){

		      nombre='';
		      rut='';
		      fecha='';

		      if( j != 0 ){
		      	  m = 4;
			      for (var i = n; i < m+n ; i++) {
			      	if( i == (n  ) ) rut    = respuesta[i];
			      	if( i == (1+n) ) nombre = respuesta[i];
			      	if( i == (3+n) ) fecha  = respuesta[i];
			      }
			  }else{
			  	  for (var i = 0; i < 5 ; i++) {
			      	if( i == (n  ) ) rut    = respuesta[i];
			      	if( i == (1+n) ) nombre = respuesta[i];
			      	if( i == (3+n) ) fecha  = respuesta[i];
			      }
			  }

		      $('#tabla_firm tr:last').after('<tr class="fila"><td>' + rut + '</td><td>' + nombre + '</td><td>' + fecha + '	</td></tr>');

		      if( j == 0) n = 5;
		      if( j == 1) n = 10;
		      if( j == 2) n = 15;
		      if( j == 3) n = 20; 
		      
		      j++;
	      }
	}

	//Pasar los datos de los documentos a firmar al formulario 
	$("#FIRMA_MASIVA").click(function(){
		$("#docs_form").val($("#docs").val());
		$("#formulario3").submit();
	}); 

	//Buscar todos los idDocumnto, de todos los pendientes por firma
	function buscarTodosDocumentosPorFirma(){

 		clearInterval(proceso);// poner esto cuando llega respuesta

		var usuarioid = $("#usuarioid").val();
		var ptipousuarioid = $("#ptipousuarioid").val();
		var form = $("#formulario_usuarios").serialize();
		var idDocumento = $("#idDocumento").val();  //console.log(idDocumento);
		
		var url = "Documentos_firmaMasiva8_ajax.php?usuarioid=" + usuarioid + "&ptipousuarioid=" + ptipousuarioid + "&formulario=" + form + "&idDocumento=" + idDocumento;
console.log(url);
		// Creamos el control XMLHttpRequest segun el navegador en el que estemos 
		if( window.XMLHttpRequest )
		ajax = new XMLHttpRequest(); // No Internet Explorer
		else
		ajax = new ActiveXObject("Microsoft.XMLHTTP"); // Internet Explorer

		// Almacenamos en el control al funcion que se invocara cuando la peticion
		// cambie de estado 
		ajax.onreadystatechange = funcionCallback_buscarTodos;

		// Enviamos la peticion
		ajax.open( "GET", url, true );
		ajax.send( "" );
	}

	//Callback de Vista previa
	function funcionCallback_buscarTodos(){
	  // Comprobamos si la peticion se ha completado (estado 4)
	  if( ajax.readyState == 4 )
	  {
	    // Comprobamos si la respuesta ha sido correcta (resultado HTTP 200)
	    if( ajax.status == 200 )
	    {
	      // Escribimos el resultado en la pagina HTML mediante DHTML
	      //document.all.salida.innerHTML = "<b>"+ajax.responseText+"</b>"; 
	      salida = ajax.responseText;
	     
	      if(salida){
	      	docs = JSON.parse(salida); 
	     // 	console.log(docs);
	      	$.each(docs, function( index, value ) { console.log(value);
			  array.push(value);
			});
	      	$("#docs").val(array);

	      	$(".checkbox").prop('checked','true');

	      }else{
	      	return false;
	      }
	    }
	  }
	}



	$(".ocultar").click(function(){
		if ( $("#collapseExample").hasClass('in')){
			$("#a").html('Mostrar filtros');
		}else{
			$("#a").html('Ocultar filtros');
		}
	});


</script>